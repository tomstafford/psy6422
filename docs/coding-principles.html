<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>PSY6422 Data Management and Visualisation @ The University of Sheffield</title>
  <meta name="description" content="This is a template. Use it to start a new course book.">
  <meta name="generator" content="bookdown 0.6 and GitBook 2.6.7">

  <meta property="og:title" content="PSY6422 Data Management and Visualisation @ The University of Sheffield" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="This is a template. Use it to start a new course book." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="PSY6422 Data Management and Visualisation @ The University of Sheffield" />
  
  <meta name="twitter:description" content="This is a template. Use it to start a new course book." />
  

<meta name="author" content="Tom Stafford">


<meta name="date" content="2020-04-13">

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="data-management.html">
<link rel="next" href="git-and-github.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />









<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>

<link rel="stylesheet" href="include/psyteachr.css" type="text/css" />
<link rel="stylesheet" href="include/style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">PSY6422 Data Management & Visualisation</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Overview</a><ul>
<li class="chapter" data-level="0.1" data-path="index.html"><a href="index.html#resources"><i class="fa fa-check"></i><b>0.1</b> Resources</a></li>
<li class="chapter" data-level="0.2" data-path="index.html"><a href="index.html#course-outline"><i class="fa fa-check"></i><b>0.2</b> Course Outline</a></li>
<li class="chapter" data-level="0.3" data-path="index.html"><a href="index.html#example-projects"><i class="fa fa-check"></i><b>0.3</b> Example Projects</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="module-overview.html"><a href="module-overview.html"><i class="fa fa-check"></i><b>1</b> Module Overview</a></li>
<li class="chapter" data-level="2" data-path="project-organisation.html"><a href="project-organisation.html"><i class="fa fa-check"></i><b>2</b> Project Organisation</a></li>
<li class="chapter" data-level="3" data-path="r-r-studio.html"><a href="r-r-studio.html"><i class="fa fa-check"></i><b>3</b> R &amp; R Studio</a></li>
<li class="chapter" data-level="4" data-path="making-graphs.html"><a href="making-graphs.html"><i class="fa fa-check"></i><b>4</b> Making Graphs</a></li>
<li class="chapter" data-level="5" data-path="data-management.html"><a href="data-management.html"><i class="fa fa-check"></i><b>5</b> Data Management</a></li>
<li class="chapter" data-level="6" data-path="coding-principles.html"><a href="coding-principles.html"><i class="fa fa-check"></i><b>6</b> Coding Principles</a><ul>
<li class="chapter" data-level="6.1" data-path="coding-principles.html"><a href="coding-principles.html#fundamental-methods"><i class="fa fa-check"></i><b>6.1</b> Fundamental methods</a><ul>
<li class="chapter" data-level="6.1.1" data-path="coding-principles.html"><a href="coding-principles.html#if"><i class="fa fa-check"></i><b>6.1.1</b> If statements</a></li>
<li class="chapter" data-level="6.1.2" data-path="coding-principles.html"><a href="coding-principles.html#loops"><i class="fa fa-check"></i><b>6.1.2</b> Loops</a></li>
<li class="chapter" data-level="6.1.3" data-path="coding-principles.html"><a href="coding-principles.html#functions"><i class="fa fa-check"></i><b>6.1.3</b> Functions</a></li>
<li class="chapter" data-level="6.1.4" data-path="coding-principles.html"><a href="coding-principles.html#exercises"><i class="fa fa-check"></i><b>6.1.4</b> Exercises</a></li>
<li class="chapter" data-level="6.1.5" data-path="coding-principles.html"><a href="coding-principles.html#more"><i class="fa fa-check"></i><b>6.1.5</b> More</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="coding-principles.html"><a href="coding-principles.html#fundamental-principles-of-good-code"><i class="fa fa-check"></i><b>6.2</b> Fundamental principles of good code</a><ul>
<li class="chapter" data-level="6.2.1" data-path="coding-principles.html"><a href="coding-principles.html#comment"><i class="fa fa-check"></i><b>6.2.1</b> Comment</a></li>
<li class="chapter" data-level="6.2.2" data-path="coding-principles.html"><a href="coding-principles.html#functionalise"><i class="fa fa-check"></i><b>6.2.2</b> Functionalise</a></li>
<li class="chapter" data-level="6.2.3" data-path="coding-principles.html"><a href="coding-principles.html#avoid-hard-coded-values"><i class="fa fa-check"></i><b>6.2.3</b> Avoid hard coded values</a></li>
<li class="chapter" data-level="6.2.4" data-path="coding-principles.html"><a href="coding-principles.html#ask-for-help"><i class="fa fa-check"></i><b>6.2.4</b> Ask for help</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="git-and-github.html"><a href="git-and-github.html"><i class="fa fa-check"></i><b>7</b> Git and Github</a><ul>
<li class="chapter" data-level="7.1" data-path="git-and-github.html"><a href="git-and-github.html#bonus-links"><i class="fa fa-check"></i><b>7.1</b> Bonus Links</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="reading-list.html"><a href="reading-list.html"><i class="fa fa-check"></i><b>8</b> Reading List</a><ul>
<li class="chapter" data-level="8.1" data-path="reading-list.html"><a href="reading-list.html#visualisation-theory"><i class="fa fa-check"></i><b>8.1</b> Visualisation (theory)</a></li>
<li class="chapter" data-level="8.2" data-path="reading-list.html"><a href="reading-list.html#the-reproducibility-crisis"><i class="fa fa-check"></i><b>8.2</b> The Reproducibility Crisis</a></li>
<li class="chapter" data-level="8.3" data-path="reading-list.html"><a href="reading-list.html#better-practice"><i class="fa fa-check"></i><b>8.3</b> Better practice</a></li>
<li class="chapter" data-level="8.4" data-path="reading-list.html"><a href="reading-list.html#project-organisation-1"><i class="fa fa-check"></i><b>8.4</b> Project organisation</a></li>
<li class="chapter" data-level="8.5" data-path="reading-list.html"><a href="reading-list.html#coding"><i class="fa fa-check"></i><b>8.5</b> Coding</a></li>
<li class="chapter" data-level="8.6" data-path="reading-list.html"><a href="reading-list.html#r"><i class="fa fa-check"></i><b>8.6</b> R</a></li>
<li class="chapter" data-level="8.7" data-path="reading-list.html"><a href="reading-list.html#making-graphs-practice"><i class="fa fa-check"></i><b>8.7</b> Making graphs (practice)</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="appendices.html"><a href="appendices.html"><i class="fa fa-check"></i>Appendices</a><ul>
<li class="chapter" data-level="8.8" data-path="appendices.html"><a href="appendices.html#credit"><i class="fa fa-check"></i><b>8.8</b> Credit</a></li>
<li class="chapter" data-level="8.9" data-path="appendices.html"><a href="appendices.html#help-plz"><i class="fa fa-check"></i><b>8.9</b> Help plz</a></li>
<li class="chapter" data-level="8.10" data-path="appendices.html"><a href="appendices.html#python"><i class="fa fa-check"></i><b>8.10</b> Python</a></li>
<li class="chapter" data-level="8.11" data-path="appendices.html"><a href="appendices.html#general-righteousness"><i class="fa fa-check"></i><b>8.11</b> General righteousness</a></li>
<li class="chapter" data-level="8.12" data-path="appendices.html"><a href="appendices.html#testimonials"><i class="fa fa-check"></i><b>8.12</b> Testimonials</a></li>
</ul></li>
<li class="divider"></li>
<li><a rel="license" href="https://creativecommons.org/licenses/by-sa/4.0/" 
    target="blank"><img alt="Creative Commons License" 
    style="border-width:0" 
    src="https://i.creativecommons.org/l/by-sa/4.0/88x31.png" /></a><li>
<li><a href="tomstafford.staff.shef.ac.uk/" target="blank">Tom Stafford</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">PSY6422 Data Management and Visualisation @ The University of Sheffield</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="coding-principles" class="section level1">
<h1><span class="header-section-number">Chapter 6</span> Coding Principles</h1>
<p>This class is about two kinds of fundamental principles of coding. The first is fundamental methods of making code do what you want - if statement, loops, functions. The second is fundamental principles of good code. Although we are using R, all programming languages use similar methods (although the exact syntax differs), and the principles of good code will also apply across languages.</p>
<p>As well demonstrating these fundamentals, these pages also introduce the vocabulary used to discuss them. Knowing the vocabulary helps because it means you know what terms to use when searching for solutions to problems you have.</p>
<div id="fundamental-methods" class="section level2">
<h2><span class="header-section-number">6.1</span> Fundamental methods</h2>
<ol style="list-style-type: decimal">
<li><a href="coding-principles.html#if">if statements</a></li>
<li><a href="coding-principles.html#loops">loops</a></li>
<li><a href="coding-principles.html#functions">functions</a></li>
</ol>
<div id="if" class="section level3">
<h3><span class="header-section-number">6.1.1</span> If statements</h3>
<p>So far we have written simple scripts that do things in order, top to bottom</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">a &lt;-<span class="st"> </span><span class="dv">1</span> <span class="co"># define a variable</span>
a &lt;-<span class="st"> </span>a <span class="op">+</span><span class="st"> </span><span class="dv">1</span> <span class="co">#add 1</span>
<span class="kw">print</span>(a) <span class="co"># output the result</span></code></pre></div>
<pre><code>## [1] 2</code></pre>
<p>The first block above is the code, the second block (the lines which start with <code>##</code>) is the output.</p>
<p>Changing which statements are run is called &quot;flow control&quot;. An &quot;If statement&quot; is a fundamental way of doing this. It allows us to specify one set statements to run if a certain conditions is met. For example</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">a &lt;-<span class="st"> </span><span class="dv">1</span> <span class="co"># define a variable</span>
a &lt;-<span class="st"> </span>a <span class="op">+</span><span class="st"> </span><span class="dv">1</span> <span class="co">#add 1</span>
<span class="cf">if</span>(a<span class="op">&gt;</span><span class="dv">4</span>) <span class="co"># this is the condition which has to be met, the &#39;test expression&#39;</span>
{<span class="kw">print</span>(a)} <span class="co"># this statement runs if the test expression is true</span></code></pre></div>
<p>Notice there is no output. Copy the code to your own computer and run it. Now change the first line to <code>a &lt;- 9</code> and run it again.</p>
<p>An If statement defines a branch in the flow of a script. The default can be nothing happening, but sometimes you want to define two alternatives. You can do this with an &quot;If...else...statement&quot;</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">a &lt;-<span class="st"> </span><span class="dv">1</span> <span class="co"># define a variable</span>
a &lt;-<span class="st"> </span>a <span class="op">+</span><span class="st"> </span><span class="dv">1</span> <span class="co">#add 1</span>
<span class="cf">if</span>(a<span class="op">&gt;</span><span class="dv">4</span>){ <span class="co"># this is the condition which has to be met, the &#39;test expression&#39;</span>
  <span class="kw">print</span>(<span class="kw">paste</span>(a,<span class="st">&quot; is more than 4&quot;</span>)) <span class="co"># this statement runs if the test expression is true</span>
} <span class="cf">else</span> {
  {<span class="kw">print</span>(<span class="kw">paste</span>(a,<span class="st">&quot; is equal or less than 4&quot;</span>))} <span class="co"># this statement runs if the test expression is false</span>
}</code></pre></div>
<pre><code>## [1] &quot;2  is equal or less than 4&quot;</code></pre>
<p>You can actually have as many branches as you like, defining a series of test_expressions, like this</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">type_of_thing=<span class="st">&#39;&#39;</span> 
<span class="kw">print</span>(<span class="st">&quot;Is four a lot?&quot;</span>)
<span class="cf">if</span> (type_of_thing<span class="op">==</span><span class="st">&#39;Murders&#39;</span>){
  <span class="kw">print</span>(<span class="st">&quot;yes&quot;</span>)
} <span class="cf">else</span> <span class="cf">if</span> (type_of_thing<span class="op">==</span><span class="st">&#39;Dollars&#39;</span>){
  <span class="kw">print</span>(<span class="st">&quot;no&quot;</span>)
} <span class="cf">else</span> {
  <span class="kw">print</span>(<span class="st">&quot;Depends on the context&quot;</span>)
}</code></pre></div>
<pre><code>## [1] &quot;Is four a lot?&quot;
## [1] &quot;Depends on the context&quot;</code></pre>
</div>
<div id="loops" class="section level3">
<h3><span class="header-section-number">6.1.2</span> Loops</h3>
<p>Loops repeat, either iterating over a set values, like this:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="dv">5</span>){
  <span class="kw">print</span>(i)
}</code></pre></div>
<pre><code>## [1] 1
## [1] 2
## [1] 3
## [1] 4
## [1] 5</code></pre>
<p>Or until some condition is met</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">i &lt;-<span class="st"> </span><span class="dv">1</span> <span class="co">#need to initialise a starting value</span>
<span class="cf">while</span>(i<span class="op">&lt;</span><span class="dv">6</span>){
  <span class="kw">print</span>(i)
  i &lt;-<span class="st"> </span>i <span class="op">+</span><span class="st"> </span><span class="dv">1</span> <span class="co"># increment the value of the counter</span>
}</code></pre></div>
<pre><code>## [1] 1
## [1] 2
## [1] 3
## [1] 4
## [1] 5</code></pre>
<p>Note that this second version, a &quot;while loop&quot; uses a test expression just like an if statement</p>
<p>Loops are useful wherever you might want to repeat some operation.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">years &lt;-<span class="st"> </span><span class="dv">10</span> <span class="co">#how many years since you started saving</span>
savings &lt;-<span class="dv">100</span> <span class="co">#how much you start with</span>
interest &lt;-<span class="st"> </span><span class="fl">1.05</span> <span class="co">#rate of interest, ie 5% interest</span>
<span class="co">#Calculate using a loop</span>
<span class="cf">for</span> (years <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span>years){
  savings&lt;-savings<span class="op">*</span>interest
}
<span class="kw">print</span>(<span class="kw">paste</span>(<span class="st">&quot;After&quot;</span>, years, <span class="st">&quot;years you will have £&quot;</span>, <span class="kw">round</span>(savings,<span class="dv">2</span>))) <span class="co">#save more, kids</span></code></pre></div>
<pre><code>## [1] &quot;After 10 years you will have £ 162.89&quot;</code></pre>
<p>Lots of people advise against using loops because they are can be slow and it isn't always obvious what they are doing. Alternatives often exist, like vectorisation:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">years &lt;-<span class="st"> </span><span class="dv">20</span> <span class="co">#how many years since you started saving</span>
savings &lt;-<span class="dv">100</span> <span class="co">#how much you start with</span>
interest &lt;-<span class="st"> </span><span class="fl">1.05</span> <span class="co">#rate of interest, ie 5% interest</span>
<span class="co">#Calculate using a vector</span>
total_at_each_year=savings<span class="op">*</span>interest<span class="op">**</span>(<span class="dv">1</span><span class="op">:</span>years) <span class="co">#rather than a loop all the answer values are stored in a single vector</span>
<span class="kw">plot</span>(total_at_each_year,<span class="dt">xlab=</span><span class="st">&quot;years&quot;</span>) <span class="co">#bonus! We can plot, since we now have all the intervening values saved</span></code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:unnamed-chunk-9"></span>
<img src="007-coding_files/figure-html/unnamed-chunk-9-1.png" alt="**CAPTION THIS FIGURE!!**" width="100%" />
<p class="caption">
Figure 6.1: <strong>CAPTION THIS FIGURE!!</strong>
</p>
</div>
<p>The problem is, loops are the natural way to think about some problems. Often I first write my code with loops then, when I know what I really want to do I try and work out a way to do it with vectorisation.</p>
</div>
<div id="functions" class="section level3">
<h3><span class="header-section-number">6.1.3</span> Functions</h3>
<p>Functions take in values (called &quot;arguments&quot;), do something with them, and give a value or values back in return. You have already used functions, for example the mean function</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">my_nums=<span class="kw">c</span>(<span class="dv">78</span>,<span class="dv">12</span>,<span class="dv">32</span>,<span class="dv">24</span>,<span class="dv">03</span>,<span class="dv">89</span>) <span class="co">#just a vector of some numbers</span>
<span class="kw">mean</span>(my_nums) <span class="co">#use the mean function to find the average</span></code></pre></div>
<pre><code>## [1] 39.66667</code></pre>
<p>Functions always do the same thing, but give different results depending on the inputs (depending on the &quot;arguments you pass to the function&quot;).</p>
<p>You can write your own functions, and then use them again and again (&quot;call them again and again&quot;). Here is the general form of a function</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">myfunctionname &lt;-<span class="st"> </span><span class="cf">function</span>(input_value) {
<span class="co"># comment line helpfully explaining what the function does</span>
output_value &lt;-<span class="st"> </span>input_value <span class="co">#lines of code which do something to the input to produce the output</span>
<span class="kw">return</span>(output_value)
}</code></pre></div>
<p>Note a couple of things: when you run this code it does not produce any output, but a new object appears in the &quot;global environment&quot; window, top right. Like a variable, your function is now stored in the memory of the current R session.</p>
<p>You can call this function now. If you close R you'll need to define the function again by running the above code again (other functions are inbuilt, like <code>mean</code> and are loaded at startup, or when you use the <code>library</code> command to load a set of functions).</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">print</span>(<span class="kw">myfunctionname</span>(<span class="dv">3</span>))</code></pre></div>
<pre><code>## [1] 3</code></pre>
<p>Now, when we call the function, we pass actual values. Let's make our a slightly more complicated</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">adder &lt;-<span class="st"> </span><span class="cf">function</span>(first_val,second_val) {
<span class="co"># raises any input to the second power</span>
output_value &lt;-<span class="st"> </span>first_val <span class="op">+</span><span class="st"> </span>second_val
<span class="kw">return</span>(output_value)
}</code></pre></div>
<p>This does what it says on the tin</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">adder</span>(<span class="dv">3</span>,<span class="dv">5</span>)</code></pre></div>
<pre><code>## [1] 8</code></pre>
<div id="a-note-about-scope" class="section level4">
<h4><span class="header-section-number">6.1.3.1</span> A note about scope</h4>
</div>
</div>
<div id="exercises" class="section level3">
<h3><span class="header-section-number">6.1.4</span> Exercises</h3>
<ul>
<li></li>
</ul>
</div>
<div id="more" class="section level3">
<h3><span class="header-section-number">6.1.5</span> More</h3>
<p>Lisa DeBruine, &amp; Dale Barr. (2019, December 5). Data Skills for Reproducible Science (Version 1.0.0). Zenodo. <a href="http://doi.org/10.5281/zenodo.3564555" class="uri">http://doi.org/10.5281/zenodo.3564555</a>: <a href="https://psyteachr.github.io/msc-data-skills/func.html">Iterations &amp; Functions</a></p>
<p><a href="https://www.datamentor.io/r-programming/if-else-statement/">datamentor.io on Flow control</a></p>
</div>
</div>
<div id="fundamental-principles-of-good-code" class="section level2">
<h2><span class="header-section-number">6.2</span> Fundamental principles of good code</h2>
<div id="comment" class="section level3">
<h3><span class="header-section-number">6.2.1</span> Comment</h3>
<p>Your most important collaborator is you from six months ago, and they don't answer email.</p>
</div>
<div id="functionalise" class="section level3">
<h3><span class="header-section-number">6.2.2</span> Functionalise</h3>
<p>Shorter code</p>
<p>A shortcut when writing code</p>
<p>A shortcut when reading code</p>
</div>
<div id="avoid-hard-coded-values" class="section level3">
<h3><span class="header-section-number">6.2.3</span> Avoid hard coded values</h3>
<p>Transparency</p>
<p>Flexibility</p>
</div>
<div id="ask-for-help" class="section level3">
<h3><span class="header-section-number">6.2.4</span> Ask for help</h3>
<p>Writing a complete example</p>
<p>Your code is good enough to share</p>

</div>
</div>
</div>
<div class="psyteachr_footer">
  
</div>
<script>

/* update total correct if #total_correct exists */
update_total_correct = function() {
  if (t = document.getElementById("total_correct")) {
    t.innerHTML =
      document.getElementsByClassName("correct").length + " of " +
      document.getElementsByClassName("solveme").length + " correct";
  }
}

/* solution button toggling function */
b_func = function() {
  var cl = this.parentElement.classList;
  if (cl.contains('open')) {
    cl.remove("open");
  } else {
    cl.add("open");
  }
}

/* function for checking solveme answers */
solveme_func = function(e) {
  var real_answers = JSON.parse(this.dataset.answer);
  var my_answer = this.value;
  var cl = this.classList;
  if (cl.contains("ignorecase")) {
    my_answer = my_answer.toLowerCase();
  }
  if (cl.contains("nospaces")) {
    my_answer = my_answer.replace(/ /g, "");
  }
  
  if (my_answer !== "" & real_answers.includes(my_answer)) {
    cl.add("correct");
  } else {
    cl.remove("correct");
  }

  // match numeric answers within a specified tolerance
  if(this.dataset.tol){
    var tol = JSON.parse(this.dataset.tol);  
    var matches = real_answers.map(x => Math.abs(x - my_answer) < tol)
    if (matches.reduce((a, b) => a + b, 0) > 0) {
      cl.add("correct");
    } else {
      cl.remove("correct");
    }  
  }

  // added regex bit
  if (cl.contains("regex")){
    answer_regex = RegExp(real_answers.join("|"))
    if (answer_regex.test(my_answer)) {
      cl.add("correct");
    }  
  }
  
  update_total_correct();
}

window.onload = function() {
  /* set up solution buttons */
  var buttons = document.getElementsByTagName("button");

  for (var i = 0; i < buttons.length; i++) {
    if (buttons[i].parentElement.classList.contains('solution')) {
      buttons[i].onclick = b_func;
    }
  }
  
  /* set up solveme inputs */
  var solveme = document.getElementsByClassName("solveme");

  for (var i = 0; i < solveme.length; i++) {
    /* make sure input boxes don't auto-anything */
    solveme[i].setAttribute("autocomplete","off");
    solveme[i].setAttribute("autocorrect", "off");
    solveme[i].setAttribute("autocapitalize", "off"); 
    solveme[i].setAttribute("spellcheck", "false");
    solveme[i].value = "";
    
    /* adjust answer for ignorecase or nospaces */
    var cl = solveme[i].classList;
    var real_answer = solveme[i].dataset.answer;
    if (cl.contains("ignorecase")) {
      real_answer = real_answer.toLowerCase();
    }
    if (cl.contains("nospaces")) {
      real_answer = real_answer.replace(/ /g, "");
    }
    solveme[i].dataset.answer = real_answer;
    
    /* attach checking function */
    solveme[i].onkeyup = solveme_func;
    solveme[i].onchange = solveme_func;
  }
  
  update_total_correct();
}

</script>
            </section>

          </div>
        </div>
      </div>
<a href="data-management.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="git-and-github.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"weibo": false,
"instapper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"],
"linkedin": false,
"instapaper": true
},
"fontsettings": {
"theme": "black",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"download": {},
"toc": {
"collapse": "section",
"scroll_highlight": true
}
});
});
</script>

</body>

</html>
