<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>6 coding B | PSY6422 Data Management and Visualisation @ The University of Sheffield</title>
  <meta name="description" content="This is a template. Use it to start a new course book." />
  <meta name="generator" content="bookdown 0.10 and GitBook 2.6.7" />

  <meta property="og:title" content="6 coding B | PSY6422 Data Management and Visualisation @ The University of Sheffield" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="This is a template. Use it to start a new course book." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="6 coding B | PSY6422 Data Management and Visualisation @ The University of Sheffield" />
  
  <meta name="twitter:description" content="This is a template. Use it to start a new course book." />
  

<meta name="author" content="Tom Stafford" />


<meta name="date" content="2020-04-20" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="data-management-1.html">
<link rel="next" href="coding-principles.html">
<script src="libs/header-attrs-2.1/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />









<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="include/psyteachr.css" type="text/css" />
<link rel="stylesheet" href="include/style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">PSY6422 Data Management & Visualisation</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Overview</a>
<ul>
<li class="chapter" data-level="0.1" data-path="index.html"><a href="index.html#resources"><i class="fa fa-check"></i><b>0.1</b> Resources</a></li>
<li class="chapter" data-level="0.2" data-path="index.html"><a href="index.html#course-outline"><i class="fa fa-check"></i><b>0.2</b> Course Outline</a></li>
<li class="chapter" data-level="0.3" data-path="index.html"><a href="index.html#example-projects"><i class="fa fa-check"></i><b>0.3</b> Example Projects</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="module-overview.html"><a href="module-overview.html"><i class="fa fa-check"></i><b>1</b> Module Overview</a>
<ul>
<li class="chapter" data-level="1.1" data-path="module-overview.html"><a href="module-overview.html#motivation"><i class="fa fa-check"></i><b>1.1</b> Motivation</a></li>
<li class="chapter" data-level="1.2" data-path="module-overview.html"><a href="module-overview.html#more"><i class="fa fa-check"></i><b>1.2</b> More</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="project-organisation.html"><a href="project-organisation.html"><i class="fa fa-check"></i><b>2</b> Project Organisation</a>
<ul>
<li class="chapter" data-level="2.1" data-path="project-organisation.html"><a href="project-organisation.html#data-management"><i class="fa fa-check"></i><b>2.1</b> Data Management</a></li>
<li class="chapter" data-level="2.2" data-path="project-organisation.html"><a href="project-organisation.html#reading"><i class="fa fa-check"></i><b>2.2</b> Reading:</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="r-r-studio.html"><a href="r-r-studio.html"><i class="fa fa-check"></i><b>3</b> R &amp; R Studio</a></li>
<li class="chapter" data-level="4" data-path="making-graphs.html"><a href="making-graphs.html"><i class="fa fa-check"></i><b>4</b> Making Graphs</a></li>
<li class="chapter" data-level="5" data-path="data-management-1.html"><a href="data-management-1.html"><i class="fa fa-check"></i><b>5</b> Data Management</a></li>
<li class="chapter" data-level="6" data-path="coding-b.html"><a href="coding-b.html"><i class="fa fa-check"></i><b>6</b> coding B</a>
<ul>
<li class="chapter" data-level="6.0.1" data-path="coding-b.html"><a href="coding-b.html#loops"><i class="fa fa-check"></i><b>6.0.1</b> Loops</a></li>
<li class="chapter" data-level="6.0.2" data-path="coding-b.html"><a href="coding-b.html#functions"><i class="fa fa-check"></i><b>6.0.2</b> Functions</a></li>
<li class="chapter" data-level="6.0.3" data-path="coding-b.html"><a href="coding-b.html#avoid-hard-coded-values"><i class="fa fa-check"></i><b>6.0.3</b> Avoid hard coded values</a></li>
<li class="chapter" data-level="6.0.4" data-path="coding-b.html"><a href="coding-b.html#functionalise-generalise"><i class="fa fa-check"></i><b>6.0.4</b> Functionalise &amp; Generalise</a></li>
<li class="chapter" data-level="6.0.5" data-path="coding-b.html"><a href="coding-b.html#ask-for-help"><i class="fa fa-check"></i><b>6.0.5</b> Ask for help</a></li>
<li class="chapter" data-level="6.0.6" data-path="coding-b.html"><a href="coding-b.html#more-1"><i class="fa fa-check"></i><b>6.0.6</b> More</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="coding-principles.html"><a href="coding-principles.html"><i class="fa fa-check"></i><b>7</b> Coding Principles</a>
<ul>
<li class="chapter" data-level="7.1" data-path="coding-principles.html"><a href="coding-principles.html#fundamental-methods"><i class="fa fa-check"></i><b>7.1</b> Fundamental methods</a>
<ul>
<li class="chapter" data-level="7.1.1" data-path="coding-principles.html"><a href="coding-principles.html#if"><i class="fa fa-check"></i><b>7.1.1</b> If statements</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="rmarkdown.html"><a href="rmarkdown.html"><i class="fa fa-check"></i><b>8</b> Rmarkdown</a>
<ul>
<li class="chapter" data-level="8.1" data-path="rmarkdown.html"><a href="rmarkdown.html#and-this-line-is-a-heading"><i class="fa fa-check"></i><b>8.1</b> And this line is a heading</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="git-and-github.html"><a href="git-and-github.html"><i class="fa fa-check"></i><b>9</b> Git and Github</a>
<ul>
<li class="chapter" data-level="9.1" data-path="git-and-github.html"><a href="git-and-github.html#before-the-class"><i class="fa fa-check"></i><b>9.1</b> Before the class</a></li>
<li class="chapter" data-level="9.2" data-path="git-and-github.html"><a href="git-and-github.html#resources-1"><i class="fa fa-check"></i><b>9.2</b> Resources</a></li>
<li class="chapter" data-level="9.3" data-path="git-and-github.html"><a href="git-and-github.html#bonus-links"><i class="fa fa-check"></i><b>9.3</b> Bonus Links</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="publishing.html"><a href="publishing.html"><i class="fa fa-check"></i><b>10</b> Publishing</a>
<ul>
<li class="chapter" data-level="10.1" data-path="publishing.html"><a href="publishing.html#sharing-your-rmd-files-via-github-pages"><i class="fa fa-check"></i><b>10.1</b> Sharing your Rmd files via Github pages</a></li>
<li class="chapter" data-level="10.2" data-path="publishing.html"><a href="publishing.html#other-sharing-options"><i class="fa fa-check"></i><b>10.2</b> Other sharing options</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="advanced-topics.html"><a href="advanced-topics.html"><i class="fa fa-check"></i><b>11</b> Advanced Topics</a>
<ul>
<li class="chapter" data-level="11.1" data-path="advanced-topics.html"><a href="advanced-topics.html#better-graphs"><i class="fa fa-check"></i><b>11.1</b> Better graphs</a></li>
<li class="chapter" data-level="11.2" data-path="advanced-topics.html"><a href="advanced-topics.html#reproducibility"><i class="fa fa-check"></i><b>11.2</b> Reproducibility</a></li>
<li class="chapter" data-level="11.3" data-path="advanced-topics.html"><a href="advanced-topics.html#preview-of-other-advanced-topics"><i class="fa fa-check"></i><b>11.3</b> Preview of other advanced topics</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="reading-list.html"><a href="reading-list.html"><i class="fa fa-check"></i><b>12</b> Reading List</a>
<ul>
<li class="chapter" data-level="12.1" data-path="reading-list.html"><a href="reading-list.html#visualisation-theory"><i class="fa fa-check"></i><b>12.1</b> Visualisation (theory)</a></li>
<li class="chapter" data-level="12.2" data-path="reading-list.html"><a href="reading-list.html#the-reproducibility-crisis"><i class="fa fa-check"></i><b>12.2</b> The Reproducibility Crisis</a></li>
<li class="chapter" data-level="12.3" data-path="reading-list.html"><a href="reading-list.html#better-practice"><i class="fa fa-check"></i><b>12.3</b> Better practice</a></li>
<li class="chapter" data-level="12.4" data-path="reading-list.html"><a href="reading-list.html#project-organisation-1"><i class="fa fa-check"></i><b>12.4</b> Project organisation</a></li>
<li class="chapter" data-level="12.5" data-path="reading-list.html"><a href="reading-list.html#coding"><i class="fa fa-check"></i><b>12.5</b> Coding</a></li>
<li class="chapter" data-level="12.6" data-path="reading-list.html"><a href="reading-list.html#r"><i class="fa fa-check"></i><b>12.6</b> R</a></li>
<li class="chapter" data-level="12.7" data-path="reading-list.html"><a href="reading-list.html#making-graphs-practice"><i class="fa fa-check"></i><b>12.7</b> Making graphs (practice)</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="appendices.html"><a href="appendices.html"><i class="fa fa-check"></i>Appendices</a>
<ul>
<li class="chapter" data-level="12.8" data-path="appendices.html"><a href="appendices.html#credit"><i class="fa fa-check"></i><b>12.8</b> Credit</a></li>
<li class="chapter" data-level="12.9" data-path="appendices.html"><a href="appendices.html#help-plz"><i class="fa fa-check"></i><b>12.9</b> Help plz</a></li>
<li class="chapter" data-level="12.10" data-path="appendices.html"><a href="appendices.html#python"><i class="fa fa-check"></i><b>12.10</b> Python</a></li>
<li class="chapter" data-level="12.11" data-path="appendices.html"><a href="appendices.html#general-righteousness"><i class="fa fa-check"></i><b>12.11</b> General righteousness</a></li>
<li class="chapter" data-level="12.12" data-path="appendices.html"><a href="appendices.html#testimonials"><i class="fa fa-check"></i><b>12.12</b> Testimonials</a></li>
</ul></li>
<li class="divider"></li>
<li><a rel="license" href="https://creativecommons.org/licenses/by-sa/4.0/" 
    target="blank"><img alt="Creative Commons License" 
    style="border-width:0" 
    src="https://i.creativecommons.org/l/by-sa/4.0/88x31.png" /></a></li>
<li><a href="tomstafford.staff.shef.ac.uk/" target="blank">Tom Stafford</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">PSY6422 Data Management and Visualisation @ The University of Sheffield</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="coding-b" class="section level1" number="6">
<h1 number="6"><span class="header-section-number">6</span> coding B</h1>
<div id="loops" class="section level3" number="6.0.1">
<h3 number="6.0.1"><span class="header-section-number">6.0.1</span> Loops</h3>
<p>Loops repeat, either iterating over a set values, like this:</p>
<pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="coding-b.html#cb1-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="dv">5</span>){</span>
<span id="cb1-2"><a href="coding-b.html#cb1-2"></a><span class="kw">print</span>(i)</span>
<span id="cb1-3"><a href="coding-b.html#cb1-3"></a>}</span></code></pre></div>
<pre><code>## [1] 1
## [1] 2
## [1] 3
## [1] 4
## [1] 5</code></pre>
<p>Or until some condition is met</p>
<pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="coding-b.html#cb3-1"></a>i &lt;-<span class="st"> </span><span class="dv">1</span> <span class="co">#need to initialise a starting value</span></span>
<span id="cb3-2"><a href="coding-b.html#cb3-2"></a><span class="cf">while</span>(i<span class="op">&lt;</span><span class="dv">6</span>){</span>
<span id="cb3-3"><a href="coding-b.html#cb3-3"></a>  <span class="kw">print</span>(i)</span>
<span id="cb3-4"><a href="coding-b.html#cb3-4"></a>  i &lt;-<span class="st"> </span>i <span class="op">+</span><span class="st"> </span><span class="dv">1</span> <span class="co"># increment the value of the counter</span></span>
<span id="cb3-5"><a href="coding-b.html#cb3-5"></a>}</span></code></pre></div>
<pre><code>## [1] 1
## [1] 2
## [1] 3
## [1] 4
## [1] 5</code></pre>
<p>Note that this second version, a “while loop” uses a test expression just like an if statement</p>
<p>Loops are useful wherever you might want to repeat some operation.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="coding-b.html#cb5-1"></a>years &lt;-<span class="st"> </span><span class="dv">10</span> <span class="co">#how many years since you started saving</span></span>
<span id="cb5-2"><a href="coding-b.html#cb5-2"></a>savings &lt;-<span class="dv">100</span> <span class="co">#how much you start with</span></span>
<span id="cb5-3"><a href="coding-b.html#cb5-3"></a>interest &lt;-<span class="st"> </span><span class="fl">1.05</span> <span class="co">#rate of interest, ie 5% interest</span></span>
<span id="cb5-4"><a href="coding-b.html#cb5-4"></a><span class="co">#Calculate using a loop</span></span>
<span id="cb5-5"><a href="coding-b.html#cb5-5"></a><span class="cf">for</span> (years <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span>years){</span>
<span id="cb5-6"><a href="coding-b.html#cb5-6"></a>  savings&lt;-savings<span class="op">*</span>interest</span>
<span id="cb5-7"><a href="coding-b.html#cb5-7"></a>}</span>
<span id="cb5-8"><a href="coding-b.html#cb5-8"></a><span class="kw">print</span>(<span class="kw">paste</span>(<span class="st">&quot;After&quot;</span>, years, <span class="st">&quot;years you will have £&quot;</span>, <span class="kw">round</span>(savings,<span class="dv">2</span>))) <span class="co">#save more, kids</span></span></code></pre></div>
<pre><code>## [1] &quot;After 10 years you will have £ 162.89&quot;</code></pre>
<p>Lots of people advise against using loops because they are can be slow and it isn’t always obvious what they are doing. Alternatives often exist, like vectorisation:</p>
<pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="coding-b.html#cb7-1"></a>years &lt;-<span class="st"> </span><span class="dv">20</span> <span class="co">#how many years since you started saving</span></span>
<span id="cb7-2"><a href="coding-b.html#cb7-2"></a>savings &lt;-<span class="dv">100</span> <span class="co">#how much you start with</span></span>
<span id="cb7-3"><a href="coding-b.html#cb7-3"></a>interest &lt;-<span class="st"> </span><span class="fl">1.05</span> <span class="co">#rate of interest, ie 5% interest</span></span>
<span id="cb7-4"><a href="coding-b.html#cb7-4"></a><span class="co">#Calculate using a vector</span></span>
<span id="cb7-5"><a href="coding-b.html#cb7-5"></a>total_at_each_year=savings<span class="op">*</span>interest<span class="op">**</span>(<span class="dv">1</span><span class="op">:</span>years) <span class="co">#rather than a loop all the answer values are stored in a single vector</span></span>
<span id="cb7-6"><a href="coding-b.html#cb7-6"></a><span class="co">#plot(total_at_each_year,xlab=&quot;years&quot;) #bonus! We can plot, since we now have all the intervening values saved</span></span></code></pre></div>
<p>The problem is, loops are the natural way to think about some problems. Often I first write my code with loops then, when I know what I really want to do I try and work out a way to do it with vectorisation.</p>
</div>
<div id="functions" class="section level3" number="6.0.2">
<h3 number="6.0.2"><span class="header-section-number">6.0.2</span> Functions</h3>
<p>Functions take in values (called “arguments”), do something with them, and give a value or values back in return. You have already used functions, for example the mean function</p>
<pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="coding-b.html#cb8-1"></a>my_nums=<span class="kw">c</span>(<span class="dv">78</span>,<span class="dv">12</span>,<span class="dv">32</span>,<span class="dv">24</span>,<span class="dv">03</span>,<span class="dv">89</span>) <span class="co">#just a vector of some numbers</span></span>
<span id="cb8-2"><a href="coding-b.html#cb8-2"></a><span class="kw">mean</span>(my_nums) <span class="co">#use the mean function to find the average</span></span></code></pre></div>
<pre><code>## [1] 39.66667</code></pre>
<p>Functions always do the same thing, but give different results depending on the inputs (depending on the “arguments you pass to the function”).</p>
<p>You can write your own functions, and then use them again and again (“call them again and again”). Here is the general form of a function</p>
<pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="coding-b.html#cb10-1"></a>myfunctionname &lt;-<span class="st"> </span><span class="cf">function</span>(input_value) {</span>
<span id="cb10-2"><a href="coding-b.html#cb10-2"></a><span class="co"># comment line helpfully explaining what the function does</span></span>
<span id="cb10-3"><a href="coding-b.html#cb10-3"></a>output_value &lt;-<span class="st"> </span>input_value <span class="co">#lines of code which do something to the input to produce the output</span></span>
<span id="cb10-4"><a href="coding-b.html#cb10-4"></a><span class="kw">return</span>(output_value)</span>
<span id="cb10-5"><a href="coding-b.html#cb10-5"></a>}</span></code></pre></div>
<p>Note a couple of things: when you run this code it does not produce any output, but a new object appears in the “global environment” window, top right. Like a variable, your function is now stored in the memory of the current R session.</p>
<p>You can call this function now. If you close R you’ll need to define the function again by running the above code again (other functions are inbuilt, like <code>mean</code> and are loaded at startup, or when you use the <code>library</code> command to load a set of functions).</p>
<p>Now, when we call the function, we pass actual values.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="coding-b.html#cb11-1"></a><span class="kw">print</span>(<span class="kw">myfunctionname</span>(<span class="dv">3</span>))</span></code></pre></div>
<pre><code>## [1] 3</code></pre>
<p>Let’s make our a slightly more complicated</p>
<pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="coding-b.html#cb13-1"></a>outcheck &lt;-<span class="st"> </span><span class="cf">function</span>(val,threshold) {</span>
<span id="cb13-2"><a href="coding-b.html#cb13-2"></a><span class="co"># outlier checker</span></span>
<span id="cb13-3"><a href="coding-b.html#cb13-3"></a><span class="cf">if</span>(val<span class="op">&lt;</span>threshold){</span>
<span id="cb13-4"><a href="coding-b.html#cb13-4"></a>  output_value &lt;-<span class="st"> </span>val <span class="co">#if value is below theshold return that value</span></span>
<span id="cb13-5"><a href="coding-b.html#cb13-5"></a>} <span class="cf">else</span> {</span>
<span id="cb13-6"><a href="coding-b.html#cb13-6"></a>  output_value &lt;-<span class="st"> </span><span class="ot">NA</span> <span class="co">#otherwise, return NaN</span></span>
<span id="cb13-7"><a href="coding-b.html#cb13-7"></a>}</span>
<span id="cb13-8"><a href="coding-b.html#cb13-8"></a><span class="kw">return</span>(output_value)</span>
<span id="cb13-9"><a href="coding-b.html#cb13-9"></a>}</span></code></pre></div>
<p>This function takes two input values, and returns a single value which depends on the relation between the two</p>
<pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="coding-b.html#cb14-1"></a><span class="kw">outcheck</span>(<span class="dv">3</span>,<span class="dv">5</span>)</span></code></pre></div>
<pre><code>## [1] 3</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="coding-b.html#cb16-1"></a><span class="kw">outcheck</span>(<span class="dv">7</span>,<span class="dv">5</span>)</span></code></pre></div>
<pre><code>## [1] NA</code></pre>
<div id="a-note-about-scope" class="section level4" number="6.0.2.1">
<h4 number="6.0.2.1"><span class="header-section-number">6.0.2.1</span> A note about scope</h4>
<p>Variables within functions are kept ‘inside’ the functions (within the “scope” of the function). Once you pass a value to a function is acquires the label set in the function definition. Variables defined within the function don’t persist outside of it (they don’t affect the “global environment”)</p>
<p>So, for example, it doesn’t matter if you have another variable called <code>threshold</code>, the threshold within the function is set by the second value passed it. Like this:</p>
<pre><code>                                                                                                                                                                                                                                                            ```r
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          threshold &lt;- 100
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          outcheck(7,5) #returns NA because 7 is higher than 5
                                                                                                                                                                                                                                                            ```
                                                                                                                                                                                                                                                            
                                                                                                                                                                                                                                                            ```
                                                                                                                                                                                                                                                            ## [1] NA
                                                                                                                                                                                                                                                            ```
                                                                                                                                                                                                                                                          
                                                                                                                                                                                                                                                          
                                                                                                                                                                                                                                                          ### Exercises
                                                                                                                                                                                                                                                          
                                                                                                                                                                                                                                                          * Write an if...else statement that prints &quot;ODD&quot; if the number is odd, &quot;EVEN&quot; if the number is even
                                                                                                                                                                                                                                                          * hint: you might use the remainder function %% (try 4%%2 to see how much is left when you divide 4 by 2)
                                                                                                                                                                                                                                                          * Write a loop which goes from 10 to 20 in steps of 3
                                                                                                                                                                                                                                                          * Write a function which prints &quot;FIZZ&quot; if a number is divisible by 3, and &quot;BUZZ&quot; if it is divisible by 5 and &quot;FIZZBUZZ&quot; if it is divisble by 3 *and* 5
                                                                                                                                                                                                                                                          * Write a loop which counts from 1 to 100 and applies the fizzbuzz function to each number
                                                                                                                                                                                                                                                          
                                                                                                                                                                                                                                                          
                                                                                                                                                                                                                                                          
                                                                                                                                                                                                                                                          ### More
                                                                                                                                                                                                                                                          
                                                                                                                                                                                                                                                          Lisa DeBruine, &amp; Dale Barr. (2019, December 5). Data Skills for Reproducible Science (Version 1.0.0). Zenodo. http://doi.org/10.5281/zenodo.3564555: [Iterations &amp; Functions](https://psyteachr.github.io/msc-data-skills/func.html)
                                                                                                                                                                                                                                                          
                                                                                                                                                                                                                                                          [datamentor.io on Flow control](https://www.datamentor.io/r-programming/if-else-statement/)
                                                                                                                                                                                                                                                          
                                                                                                                                                                                                                                                          ## Fundamental principles of good code
                                                                                                                                                                                                                                                          
                                                                                                                                                                                                                                                          ### Readability Matters
                                                                                                                                                                                                                                                          
                                                                                                                                                                                                                                                          Your most important collaborator is you from six months ago, and they don&#39;t answer email.</code></pre>
<p>Good code doesn’t just work, it is easy to understand. This supports the code being checked for errors, modified and improved (by you as well as by other people).</p>
<pre><code>                                                                                                                                                                                                                                                          To support this you should make your code readable. This means commenting your code, but also laying it out nicely, and using sensible names for variables and function. The aim is to make the code explain itself, as well as doing something. Someone who reads your code - a future you maybe, or a collaborator - needs to be able to run the code, yes, but they also need to know what you are doing and why you are doing. 
                                                                                                                                                                                                                                                          
                                                                                                                                                                                                                                                          Look at this function, it hard to understand, right?
                                                                                                                                                                                                                                                            
                                                                                                                                                                                                                                                            
                                                                                                                                                                                                                                                            
                                                                                                                                                                                                                                                            ```r
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          pf &lt;- function(n){ p=1 ; if (n&gt;1){ i = 2; while( (i&lt;(n/2+1)) &amp; (p==1) ) {if (n%%i ==0) p=0; i=i+1 }  } else {p=0 }; return(p) }
                                                                                                                                                                                                                                                            ```
                                                                                                                                                                                                                                                          
                                                                                                                                                                                                                                                          This kind of code is very compressed. You can fit a lot in a few lines, but it is useless because nobody else will understand it, and probably the person who wrote it won&#39;t understand it when they come back to it (and that means they will miss any bugs, or will find it hard to improve or repurpose).</code></pre>
<p>Readability is improved a lot by adding some spacing and tabs. Have another go at figuring out what the code does:</p>
<pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="coding-b.html#cb20-1"></a>pf &lt;-<span class="st"> </span><span class="cf">function</span>(n){</span>
<span id="cb20-2"><a href="coding-b.html#cb20-2"></a>  p=<span class="dv">1</span></span>
<span id="cb20-3"><a href="coding-b.html#cb20-3"></a>  <span class="cf">if</span> (n<span class="op">&gt;</span><span class="dv">1</span>){ </span>
<span id="cb20-4"><a href="coding-b.html#cb20-4"></a>    i =<span class="st"> </span><span class="dv">2</span> </span>
<span id="cb20-5"><a href="coding-b.html#cb20-5"></a>      <span class="cf">while</span>( (i<span class="op">&lt;</span>(n<span class="op">/</span><span class="dv">2</span><span class="op">+</span><span class="dv">1</span>)) <span class="op">&amp;</span><span class="st"> </span>(p<span class="op">==</span><span class="dv">1</span>) ) {</span>
<span id="cb20-6"><a href="coding-b.html#cb20-6"></a>        <span class="cf">if</span> (n<span class="op">%%</span>i <span class="op">==</span><span class="dv">0</span>) {</span>
<span id="cb20-7"><a href="coding-b.html#cb20-7"></a>          p=<span class="dv">0</span></span>
<span id="cb20-8"><a href="coding-b.html#cb20-8"></a>        }</span>
<span id="cb20-9"><a href="coding-b.html#cb20-9"></a>        i=i<span class="op">+</span><span class="dv">1</span></span>
<span id="cb20-10"><a href="coding-b.html#cb20-10"></a>      }</span>
<span id="cb20-11"><a href="coding-b.html#cb20-11"></a>  } <span class="cf">else</span> {</span>
<span id="cb20-12"><a href="coding-b.html#cb20-12"></a>    p=<span class="dv">0</span></span>
<span id="cb20-13"><a href="coding-b.html#cb20-13"></a>  }</span>
<span id="cb20-14"><a href="coding-b.html#cb20-14"></a>  <span class="kw">return</span>(p)</span>
<span id="cb20-15"><a href="coding-b.html#cb20-15"></a>}</span></code></pre></div>
<p>Now we make the variable and function names sensible:</p>
<pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="coding-b.html#cb21-1"></a>primecheck &lt;-<span class="st"> </span><span class="cf">function</span>(num){</span>
<span id="cb21-2"><a href="coding-b.html#cb21-2"></a>  isprime=<span class="ot">TRUE</span></span>
<span id="cb21-3"><a href="coding-b.html#cb21-3"></a>  <span class="cf">if</span> (num<span class="op">&gt;</span><span class="dv">1</span>){ </span>
<span id="cb21-4"><a href="coding-b.html#cb21-4"></a>    i =<span class="st"> </span><span class="dv">2</span> </span>
<span id="cb21-5"><a href="coding-b.html#cb21-5"></a>      <span class="cf">while</span>( (i<span class="op">&lt;</span>(num<span class="op">/</span><span class="dv">2</span><span class="op">+</span><span class="dv">1</span>)) <span class="op">&amp;</span><span class="st"> </span>(isprime<span class="op">==</span><span class="ot">TRUE</span>) ) {</span>
<span id="cb21-6"><a href="coding-b.html#cb21-6"></a>        <span class="cf">if</span> (num<span class="op">%%</span>i <span class="op">==</span><span class="dv">0</span>) {</span>
<span id="cb21-7"><a href="coding-b.html#cb21-7"></a>          isprime=<span class="ot">FALSE</span></span>
<span id="cb21-8"><a href="coding-b.html#cb21-8"></a>        }</span>
<span id="cb21-9"><a href="coding-b.html#cb21-9"></a>        i=i<span class="op">+</span><span class="dv">1</span></span>
<span id="cb21-10"><a href="coding-b.html#cb21-10"></a>      }</span>
<span id="cb21-11"><a href="coding-b.html#cb21-11"></a>  } <span class="cf">else</span> {</span>
<span id="cb21-12"><a href="coding-b.html#cb21-12"></a>    isprime=<span class="ot">FALSE</span></span>
<span id="cb21-13"><a href="coding-b.html#cb21-13"></a>  }</span>
<span id="cb21-14"><a href="coding-b.html#cb21-14"></a>  <span class="kw">return</span>(isprime)</span>
<span id="cb21-15"><a href="coding-b.html#cb21-15"></a>}</span></code></pre></div>
<p>Can you tell what it does yet?</p>
<p>Now fully commented</p>
<pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="coding-b.html#cb22-1"></a>primecheck &lt;-<span class="st"> </span><span class="cf">function</span>(num){</span>
<span id="cb22-2"><a href="coding-b.html#cb22-2"></a>  <span class="co">#check if a number is prime</span></span>
<span id="cb22-3"><a href="coding-b.html#cb22-3"></a>  <span class="co"># - assumes the number provided is an integer</span></span>
<span id="cb22-4"><a href="coding-b.html#cb22-4"></a>  <span class="co"># - works by working through all possible divisors up to half the test number, checking if the remainer is 0</span></span>
<span id="cb22-5"><a href="coding-b.html#cb22-5"></a>  <span class="co">#</span></span>
<span id="cb22-6"><a href="coding-b.html#cb22-6"></a>  isprime=<span class="ot">TRUE</span> <span class="co"># a flag, which tracks if we think the number is prime. We start out assuming our number *is* prime</span></span>
<span id="cb22-7"><a href="coding-b.html#cb22-7"></a>  <span class="co"># first we only need to do the complicated method for numbers great than 1</span></span>
<span id="cb22-8"><a href="coding-b.html#cb22-8"></a>  <span class="cf">if</span> (num<span class="op">&gt;</span><span class="dv">1</span>){ </span>
<span id="cb22-9"><a href="coding-b.html#cb22-9"></a>    i =<span class="st"> </span><span class="dv">2</span> <span class="co">#a counter, starting at 2 (because all numbers divide by 1)</span></span>
<span id="cb22-10"><a href="coding-b.html#cb22-10"></a>      <span class="co">#use while loop to check all divisors until we&#39;ve done them all or we find one (and confirm the number is not prime)</span></span>
<span id="cb22-11"><a href="coding-b.html#cb22-11"></a><span class="cf">while</span>( (i<span class="op">&lt;</span>(num<span class="op">/</span><span class="dv">2</span><span class="op">+</span><span class="dv">1</span>)) <span class="op">&amp;</span><span class="st"> </span>(isprime<span class="op">==</span><span class="ot">TRUE</span>) ) {</span>
<span id="cb22-12"><a href="coding-b.html#cb22-12"></a>  <span class="cf">if</span> (num<span class="op">%%</span>i <span class="op">==</span><span class="dv">0</span>) {</span>
<span id="cb22-13"><a href="coding-b.html#cb22-13"></a>    <span class="co">#if the number divides by another number with no remainder it can&#39;t be prime, so we change the flag</span></span>
<span id="cb22-14"><a href="coding-b.html#cb22-14"></a>    isprime=<span class="ot">FALSE</span></span>
<span id="cb22-15"><a href="coding-b.html#cb22-15"></a>  }</span>
<span id="cb22-16"><a href="coding-b.html#cb22-16"></a>  i=i<span class="op">+</span><span class="dv">1</span> <span class="co"># increment the counter, so we work through all possible divisors</span></span>
<span id="cb22-17"><a href="coding-b.html#cb22-17"></a>}</span>
<span id="cb22-18"><a href="coding-b.html#cb22-18"></a></span>
<span id="cb22-19"><a href="coding-b.html#cb22-19"></a>} <span class="cf">else</span> {</span>
<span id="cb22-20"><a href="coding-b.html#cb22-20"></a>  <span class="co"># if the number is 1 or lower it can&#39;t be prime, so we change the flag</span></span>
<span id="cb22-21"><a href="coding-b.html#cb22-21"></a>  isprime=<span class="ot">FALSE</span></span>
<span id="cb22-22"><a href="coding-b.html#cb22-22"></a>}</span>
<span id="cb22-23"><a href="coding-b.html#cb22-23"></a><span class="kw">return</span>(isprime) <span class="co">#return the flag as the output of the function, 0 -&gt; not prime, 1 -&gt; prime</span></span>
<span id="cb22-24"><a href="coding-b.html#cb22-24"></a>}</span></code></pre></div>
<p>It is possible to comment too much. The code above I commented so someone who wasn’t an experienced programmer could read the comments and it would help them understand how the code worked (you can tell me if I succeeded). Usually a few fewer comments might make the code easier to read, with the assumption that anyone reading it has a bit of experience with the coding language. Like this</p>
<pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="coding-b.html#cb23-1"></a>primecheck &lt;-<span class="st"> </span><span class="cf">function</span>(num){</span>
<span id="cb23-2"><a href="coding-b.html#cb23-2"></a>  <span class="co">#check if a number is prime</span></span>
<span id="cb23-3"><a href="coding-b.html#cb23-3"></a>  <span class="co"># - assumes input is integer</span></span>
<span id="cb23-4"><a href="coding-b.html#cb23-4"></a>  isprime=<span class="ot">TRUE</span> <span class="co"># a flag, start assuming our number *is* prime </span></span>
<span id="cb23-5"><a href="coding-b.html#cb23-5"></a>  <span class="co"># only check numbers &gt; 1</span></span>
<span id="cb23-6"><a href="coding-b.html#cb23-6"></a>  <span class="cf">if</span> (num<span class="op">&gt;</span><span class="dv">1</span>){ </span>
<span id="cb23-7"><a href="coding-b.html#cb23-7"></a>    i =<span class="st"> </span><span class="dv">2</span> <span class="co">#a counter</span></span>
<span id="cb23-8"><a href="coding-b.html#cb23-8"></a>      <span class="co">#check all divisors until we&#39;ve done them all or we find one </span></span>
<span id="cb23-9"><a href="coding-b.html#cb23-9"></a><span class="cf">while</span>( (i<span class="op">&lt;</span>(num<span class="op">/</span><span class="dv">2</span><span class="op">+</span><span class="dv">1</span>)) <span class="op">&amp;</span><span class="st"> </span>(isprime<span class="op">==</span><span class="ot">TRUE</span>) ) {</span>
<span id="cb23-10"><a href="coding-b.html#cb23-10"></a>  <span class="cf">if</span> (num<span class="op">%%</span>i <span class="op">==</span><span class="dv">0</span>) {</span>
<span id="cb23-11"><a href="coding-b.html#cb23-11"></a>    <span class="co">#no remainder -&gt; number isn&#39;t prime</span></span>
<span id="cb23-12"><a href="coding-b.html#cb23-12"></a>    isprime=<span class="ot">FALSE</span></span>
<span id="cb23-13"><a href="coding-b.html#cb23-13"></a>  }</span>
<span id="cb23-14"><a href="coding-b.html#cb23-14"></a>  i=i<span class="op">+</span><span class="dv">1</span> <span class="co"># increment the counter</span></span>
<span id="cb23-15"><a href="coding-b.html#cb23-15"></a>}</span>
<span id="cb23-16"><a href="coding-b.html#cb23-16"></a></span>
<span id="cb23-17"><a href="coding-b.html#cb23-17"></a>} <span class="cf">else</span> {</span>
<span id="cb23-18"><a href="coding-b.html#cb23-18"></a>  <span class="co"># if the number is 1 or lower it can&#39;t be prime</span></span>
<span id="cb23-19"><a href="coding-b.html#cb23-19"></a>  isprime=<span class="ot">FALSE</span></span>
<span id="cb23-20"><a href="coding-b.html#cb23-20"></a>}</span>
<span id="cb23-21"><a href="coding-b.html#cb23-21"></a><span class="kw">return</span>(isprime)</span>
<span id="cb23-22"><a href="coding-b.html#cb23-22"></a>}</span></code></pre></div>
<p>This version is 22 lines rather than 1, but I hope you agree it is easier to work with. There’s no shortage of space in R scripts, so if in doubt, put some effort in to laying things out nicely, use sensible names for variable functions and add comments. You’ll thank yourself when you come back to your code (which you will always have to).</p>
</div>
</div>
<div id="avoid-hard-coded-values" class="section level3" number="6.0.3">
<h3 number="6.0.3"><span class="header-section-number">6.0.3</span> Avoid hard coded values</h3>
<p>Say you were going to load some data, you could do this:</p>
<pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="coding-b.html#cb24-1"></a>mydata =<span class="st"> </span><span class="kw">read.csv</span>(<span class="st">&#39;/home/tom/Desktop/psy6422/mydatafile.csv&#39;</span>)</span></code></pre></div>
<p>Now this happens to work on my computer, but it won’t on yours. The reason it won’t work isn’t because there is a bug in how i’m loading data, just that you don’t have a file in the same place as I do. Far better, for both readability and debugging if you seperate out values that might change from the commands that use them.</p>
<p>Like this:</p>
<pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="coding-b.html#cb25-1"></a>datafile =<span class="st"> &#39;/home/tom/Desktop/psy6422/mydatafile.csv&#39;</span></span>
<span id="cb25-2"><a href="coding-b.html#cb25-2"></a>mydata =<span class="st"> </span><span class="kw">read.csv</span>(datafile)</span></code></pre></div>
<p>Now the second line is easier to read, and you also have a variable which you can reuse. For example maybe later in your script you want to save the name of the raw data file somewhere. You can just use:</p>
<pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="coding-b.html#cb26-1"></a>label =<span class="st"> </span><span class="kw">paste</span>(<span class="st">&#39;This plot generated using data from &#39;</span>, datafile)</span></code></pre></div>
<p>And when you use the same script for different data, both the lines loading data and recording the data file are correct.</p>
<p>Another example</p>
<pre class="sourceCode r"><code class="sourceCode r"><span id="cb27-1"><a href="coding-b.html#cb27-1"></a>graph1 &lt;-<span class="st"> </span><span class="kw">ggplot</span>(<span class="dt">data =</span> anscombe, <span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> x1, <span class="dt">y=</span>y1))</span>
<span id="cb27-2"><a href="coding-b.html#cb27-2"></a>graph1 <span class="op">+</span><span class="st"> </span><span class="kw">geom_point</span>(<span class="dt">color=</span><span class="st">&#39;blue&#39;</span>,<span class="dt">size=</span><span class="dv">3</span>) <span class="co">#change this line for different look</span></span></code></pre></div>
<p><img src="0071-coding_files/figure-html/unnamed-chunk-21-1.png" width="100%" style="display: block; margin: auto;" /></p>
<pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="coding-b.html#cb28-1"></a>graph2 &lt;-<span class="st"> </span><span class="kw">ggplot</span>(<span class="dt">data =</span> anscombe, <span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> x2, <span class="dt">y=</span>y2))</span>
<span id="cb28-2"><a href="coding-b.html#cb28-2"></a>graph2 <span class="op">+</span><span class="st"> </span><span class="kw">geom_point</span>(<span class="dt">color=</span><span class="st">&#39;blue&#39;</span>,<span class="dt">size=</span><span class="dv">3</span>) <span class="co">#change this line for different look</span></span></code></pre></div>
<p><img src="0071-coding_files/figure-html/unnamed-chunk-22-1.png" width="100%" style="display: block; margin: auto;" /></p>
<p>Adding variables means you only need to edit one line to change the look of both plots</p>
<pre class="sourceCode r"><code class="sourceCode r"><span id="cb29-1"><a href="coding-b.html#cb29-1"></a>pointcolour=<span class="st">&#39;red&#39;</span>; pointsize=<span class="dv">5</span> ; pointshape =<span class="st"> </span><span class="dv">23</span> <span class="co">#change this line for different look</span></span>
<span id="cb29-2"><a href="coding-b.html#cb29-2"></a></span>
<span id="cb29-3"><a href="coding-b.html#cb29-3"></a>graph1 &lt;-<span class="st"> </span><span class="kw">ggplot</span>(<span class="dt">data =</span> anscombe, <span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> x1, <span class="dt">y=</span>y1)) </span>
<span id="cb29-4"><a href="coding-b.html#cb29-4"></a>graph1 <span class="op">+</span><span class="st"> </span><span class="kw">geom_point</span>(<span class="dt">color=</span>pointcolour,<span class="dt">size=</span>pointsize, <span class="dt">shape =</span> pointshape) <span class="co"># never change these lines</span></span></code></pre></div>
<p><img src="0071-coding_files/figure-html/unnamed-chunk-23-1.png" width="100%" style="display: block; margin: auto;" /></p>
<pre class="sourceCode r"><code class="sourceCode r"><span id="cb30-1"><a href="coding-b.html#cb30-1"></a>graph2 &lt;-<span class="st"> </span><span class="kw">ggplot</span>(<span class="dt">data =</span> anscombe, <span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> x2, <span class="dt">y=</span>y2))</span>
<span id="cb30-2"><a href="coding-b.html#cb30-2"></a>graph2 <span class="op">+</span><span class="st"> </span><span class="kw">geom_point</span>(<span class="dt">color=</span>pointcolour,<span class="dt">size=</span>pointsize, <span class="dt">shape =</span> pointshape) <span class="co"># never change these lines</span></span></code></pre></div>
<p><img src="0071-coding_files/figure-html/unnamed-chunk-23-2.png" width="100%" style="display: block; margin: auto;" /></p>
<p>This may seem minor, but as your code gets longer developing habits like this will save you time, and make your code easier to work with.</p>
</div>
<div id="functionalise-generalise" class="section level3" number="6.0.4">
<h3 number="6.0.4"><span class="header-section-number">6.0.4</span> Functionalise &amp; Generalise</h3>
<p>If you ever find yourself using very similar lines of code, you should think about making a function. Functions make your code shorter and easier to read (and write), and they make it <em>way</em> easier to update (because when you catch a bug you can just update the code in the function, rather than every time you repeated those lines).</p>
<p>Functions are also an opportunity to think to yourself “what is the most general purpose way of doing what I’m doing”. Thinking like this will help you develop powerful, flexible, code which you can use to do multiple things.</p>
<p>Let’s look at a toy example:</p>
<pre class="sourceCode r"><code class="sourceCode r"><span id="cb31-1"><a href="coding-b.html#cb31-1"></a>mynumbers =<span class="st"> </span><span class="kw">c</span>(<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>)</span>
<span id="cb31-2"><a href="coding-b.html#cb31-2"></a></span>
<span id="cb31-3"><a href="coding-b.html#cb31-3"></a><span class="co">#double and add one to each number</span></span>
<span id="cb31-4"><a href="coding-b.html#cb31-4"></a>mynumbers[<span class="dv">1</span>] &lt;-<span class="st"> </span>mynumbers[<span class="dv">1</span>]<span class="op">*</span><span class="dv">2</span><span class="op">+</span><span class="dv">1</span> <span class="co"># line 1</span></span>
<span id="cb31-5"><a href="coding-b.html#cb31-5"></a>mynumbers[<span class="dv">2</span>] &lt;-<span class="st"> </span>mynumbers[<span class="dv">2</span>]<span class="op">*</span><span class="dv">2</span><span class="op">+</span><span class="dv">1</span> <span class="co"># line 2</span></span>
<span id="cb31-6"><a href="coding-b.html#cb31-6"></a>mynumbers[<span class="dv">3</span>] &lt;-<span class="st"> </span>mynumbers[<span class="dv">3</span>]<span class="op">*</span><span class="dv">2</span><span class="op">+</span><span class="dv">1</span> <span class="co"># line 3</span></span>
<span id="cb31-7"><a href="coding-b.html#cb31-7"></a></span>
<span id="cb31-8"><a href="coding-b.html#cb31-8"></a><span class="kw">print</span>(mynumbers)</span></code></pre></div>
<pre><code>## [1] 5 7 9</code></pre>
<p>This can be improved with a function</p>
<pre class="sourceCode r"><code class="sourceCode r"><span id="cb33-1"><a href="coding-b.html#cb33-1"></a>myfunc &lt;-<span class="st"> </span><span class="cf">function</span>(num){</span>
<span id="cb33-2"><a href="coding-b.html#cb33-2"></a>  <span class="co">#toy function, doubles and adds 1</span></span>
<span id="cb33-3"><a href="coding-b.html#cb33-3"></a>  <span class="kw">return</span>(num<span class="op">*</span><span class="dv">2</span><span class="op">+</span><span class="dv">1</span>)</span>
<span id="cb33-4"><a href="coding-b.html#cb33-4"></a>  }  </span>
<span id="cb33-5"><a href="coding-b.html#cb33-5"></a></span>
<span id="cb33-6"><a href="coding-b.html#cb33-6"></a>mynumbers =<span class="st"> </span><span class="kw">c</span>(<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>)</span>
<span id="cb33-7"><a href="coding-b.html#cb33-7"></a></span>
<span id="cb33-8"><a href="coding-b.html#cb33-8"></a>mynumbers &lt;-<span class="st"> </span><span class="kw">myfunc</span>(mynumbers) <span class="co"># all the work with 1 line!</span></span>
<span id="cb33-9"><a href="coding-b.html#cb33-9"></a></span>
<span id="cb33-10"><a href="coding-b.html#cb33-10"></a><span class="kw">print</span>(mynumbers)</span></code></pre></div>
<pre><code>## [1] 5 7 9</code></pre>
<p>This code is easier to read, easier to change, and you can write new code which uses this function again.</p>
</div>
<div id="ask-for-help" class="section level3" number="6.0.5">
<h3 number="6.0.5"><span class="header-section-number">6.0.5</span> Ask for help</h3>
<p>Nobody finds this easy straight away. Learning how to find help a core programming skill (along with not giving up when it feels like you are completely stuck).</p>
<p>Part of this is knowing how programming people talk about stuff so you can search effectively for solutions.</p>
<p>If you get an error message, copy and paste it into your search.</p>
<p>If you are really stuck, just trying to descibe you problem is a good way of indentifying exactly what you want to do, and why you can’t. When you’ve described your problem full - see this <a href="https://stackoverflow.com/questions/5963269/how-to-make-a-great-r-reproducible-example">How to make a great R reproducible example</a> - you can ask a friend or post it to a forum.</p>
<p>If you’re on this module you can post it to Slack on the r-coding channel, or if not try seeking out R groups in your city or institution. Shout out to <a href="https://rladies.org/">Rladies</a></p>
</div>
<div id="more-1" class="section level3" number="6.0.6">
<h3 number="6.0.6"><span class="header-section-number">6.0.6</span> More</h3>
<ul>
<li><a href="https://inattentionalcoffee.wordpress.com/2017/01/13/program-better-for-fun-and-for-profit/">Program better, for fun and for profit</a></li>
<li><a href="https://kkulma.github.io/2018-03-18-Prime-Hints-for-Running-a-data-project-in-R/">Prime Hints For Running A Data Project In R</a></li>
<li>Software Carpentry: <a href="https://swcarpentry.github.io/r-novice-inflammation/06-best-practices-R/">Best Practices for Writing R Code</a></li>
<li>Nice R code: <a href="https://nicercode.github.io/intro/bad-habits.html">bad habits</a></li>
<li>Barnes, N. (2010). <a href="https://www.nature.com/articles/467753a">Publish your computer code: it is good enough</a>. Nature, 467(7317), 753-753.</li>
<li>Axelrod, V. (2014). <a href="https://www.frontiersin.org/articles/10.3389/fpsyg.2014.01435/full">Minimizing bugs in cognitive neuroscience programming</a>. Frontiers in psychology, 5, 1435.</li>
<li>Wilson, G., Aruliah, D. A., Brown, C. T., Hong, N. P. C., Davis, M., Guy, R. T., … &amp; Waugh, B. (2014). <a href="http://journals.plos.org/plosbiology/article?id=10.1371/journal.pbio.1001745">Best practices for scientific computing</a>. PLoS biology] 12(1), e1001745.</li>
</ul>

</div>
</div>
<div class="psyteachr_footer">
  
</div>
<script>

/* update total correct if #total_correct exists */
update_total_correct = function() {
  if (t = document.getElementById("total_correct")) {
    t.innerHTML =
      document.getElementsByClassName("correct").length + " of " +
      document.getElementsByClassName("solveme").length + " correct";
  }
}

/* solution button toggling function */
b_func = function() {
  var cl = this.parentElement.classList;
  if (cl.contains('open')) {
    cl.remove("open");
  } else {
    cl.add("open");
  }
}

/* function for checking solveme answers */
solveme_func = function(e) {
  var real_answers = JSON.parse(this.dataset.answer);
  var my_answer = this.value;
  var cl = this.classList;
  if (cl.contains("ignorecase")) {
    my_answer = my_answer.toLowerCase();
  }
  if (cl.contains("nospaces")) {
    my_answer = my_answer.replace(/ /g, "");
  }
  
  if (my_answer !== "" & real_answers.includes(my_answer)) {
    cl.add("correct");
  } else {
    cl.remove("correct");
  }

  // match numeric answers within a specified tolerance
  if(this.dataset.tol){
    var tol = JSON.parse(this.dataset.tol);  
    var matches = real_answers.map(x => Math.abs(x - my_answer) < tol)
    if (matches.reduce((a, b) => a + b, 0) > 0) {
      cl.add("correct");
    } else {
      cl.remove("correct");
    }  
  }

  // added regex bit
  if (cl.contains("regex")){
    answer_regex = RegExp(real_answers.join("|"))
    if (answer_regex.test(my_answer)) {
      cl.add("correct");
    }  
  }
  
  update_total_correct();
}

window.onload = function() {
  /* set up solution buttons */
  var buttons = document.getElementsByTagName("button");

  for (var i = 0; i < buttons.length; i++) {
    if (buttons[i].parentElement.classList.contains('solution')) {
      buttons[i].onclick = b_func;
    }
  }
  
  /* set up solveme inputs */
  var solveme = document.getElementsByClassName("solveme");

  for (var i = 0; i < solveme.length; i++) {
    /* make sure input boxes don't auto-anything */
    solveme[i].setAttribute("autocomplete","off");
    solveme[i].setAttribute("autocorrect", "off");
    solveme[i].setAttribute("autocapitalize", "off"); 
    solveme[i].setAttribute("spellcheck", "false");
    solveme[i].value = "";
    
    /* adjust answer for ignorecase or nospaces */
    var cl = solveme[i].classList;
    var real_answer = solveme[i].dataset.answer;
    if (cl.contains("ignorecase")) {
      real_answer = real_answer.toLowerCase();
    }
    if (cl.contains("nospaces")) {
      real_answer = real_answer.replace(/ /g, "");
    }
    solveme[i].dataset.answer = real_answer;
    
    /* attach checking function */
    solveme[i].onkeyup = solveme_func;
    solveme[i].onchange = solveme_func;
  }
  
  update_total_correct();
}

</script>
            </section>

          </div>
        </div>
      </div>
<a href="data-management-1.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="coding-principles.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapaper": true,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "black",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"download": {},
"toc": {
"collapse": "section",
"scroll_highlight": true
}
});
});
</script>

</body>

</html>
