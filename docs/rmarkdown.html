<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 7 Rmarkdown | PSY6422 Data Management and Visualisation @ The University of Sheffield</title>
  <meta name="description" content="This is a template. Use it to start a new course book." />
  <meta name="generator" content="bookdown 0.18 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 7 Rmarkdown | PSY6422 Data Management and Visualisation @ The University of Sheffield" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="This is a template. Use it to start a new course book." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 7 Rmarkdown | PSY6422 Data Management and Visualisation @ The University of Sheffield" />
  
  <meta name="twitter:description" content="This is a template. Use it to start a new course book." />
  

<meta name="author" content="Tom Stafford" />


<meta name="date" content="2020-04-22" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="coding-principles.html"/>
<link rel="next" href="second-text.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />











<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>

<link rel="stylesheet" href="include/psyteachr.css" type="text/css" />
<link rel="stylesheet" href="include/style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">PSY6422 Data Management & Visualisation</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Module Overview</a><ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#motivation"><i class="fa fa-check"></i><b>1.1</b> Motivation</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#resources-for-current-students"><i class="fa fa-check"></i><b>1.2</b> Resources for current students</a></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#course-outline"><i class="fa fa-check"></i><b>1.3</b> Course Outline</a></li>
<li class="chapter" data-level="1.4" data-path="index.html"><a href="index.html#example-projects"><i class="fa fa-check"></i><b>1.4</b> Example Projects</a></li>
<li class="chapter" data-level="1.5" data-path="index.html"><a href="index.html#more"><i class="fa fa-check"></i><b>1.5</b> More</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="project-organisation.html"><a href="project-organisation.html"><i class="fa fa-check"></i><b>2</b> Project Organisation</a><ul>
<li class="chapter" data-level="2.1" data-path="project-organisation.html"><a href="project-organisation.html#data-management"><i class="fa fa-check"></i><b>2.1</b> Data Management</a></li>
<li class="chapter" data-level="2.2" data-path="project-organisation.html"><a href="project-organisation.html#reading"><i class="fa fa-check"></i><b>2.2</b> Reading:</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="r-r-studio.html"><a href="r-r-studio.html"><i class="fa fa-check"></i><b>3</b> R &amp; R Studio</a></li>
<li class="chapter" data-level="4" data-path="making-graphs.html"><a href="making-graphs.html"><i class="fa fa-check"></i><b>4</b> Making Graphs</a></li>
<li class="chapter" data-level="5" data-path="data-management-1.html"><a href="data-management-1.html"><i class="fa fa-check"></i><b>5</b> Data Management</a></li>
<li class="chapter" data-level="6" data-path="coding-principles.html"><a href="coding-principles.html"><i class="fa fa-check"></i><b>6</b> Coding Principles</a><ul>
<li class="chapter" data-level="6.1" data-path="coding-principles.html"><a href="coding-principles.html#fundamental-methods"><i class="fa fa-check"></i><b>6.1</b> Fundamental methods</a><ul>
<li class="chapter" data-level="6.1.1" data-path="coding-principles.html"><a href="coding-principles.html#if"><i class="fa fa-check"></i><b>6.1.1</b> If statements</a></li>
<li class="chapter" data-level="6.1.2" data-path="coding-principles.html"><a href="coding-principles.html#loops"><i class="fa fa-check"></i><b>6.1.2</b> Loops</a></li>
<li class="chapter" data-level="6.1.3" data-path="coding-principles.html"><a href="coding-principles.html#functions"><i class="fa fa-check"></i><b>6.1.3</b> Functions</a></li>
<li class="chapter" data-level="6.1.4" data-path="coding-principles.html"><a href="coding-principles.html#exercises"><i class="fa fa-check"></i><b>6.1.4</b> Exercises</a></li>
<li class="chapter" data-level="6.1.5" data-path="coding-principles.html"><a href="coding-principles.html#more-1"><i class="fa fa-check"></i><b>6.1.5</b> More</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="coding-principles.html"><a href="coding-principles.html#fundamental-principles-of-good-code"><i class="fa fa-check"></i><b>6.2</b> Fundamental principles of good code</a><ul>
<li class="chapter" data-level="6.2.1" data-path="coding-principles.html"><a href="coding-principles.html#readability-matters"><i class="fa fa-check"></i><b>6.2.1</b> Readability Matters</a></li>
<li class="chapter" data-level="6.2.2" data-path="coding-principles.html"><a href="coding-principles.html#avoid-hard-coded-values"><i class="fa fa-check"></i><b>6.2.2</b> Avoid hard coded values</a></li>
<li class="chapter" data-level="6.2.3" data-path="coding-principles.html"><a href="coding-principles.html#functionalise-generalise"><i class="fa fa-check"></i><b>6.2.3</b> Functionalise &amp; Generalise</a></li>
<li class="chapter" data-level="6.2.4" data-path="coding-principles.html"><a href="coding-principles.html#ask-for-help"><i class="fa fa-check"></i><b>6.2.4</b> Ask for help</a></li>
<li class="chapter" data-level="6.2.5" data-path="coding-principles.html"><a href="coding-principles.html#more-2"><i class="fa fa-check"></i><b>6.2.5</b> More</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="rmarkdown.html"><a href="rmarkdown.html"><i class="fa fa-check"></i><b>7</b> Rmarkdown</a><ul>
<li class="chapter" data-level="7.1" data-path="rmarkdown.html"><a href="rmarkdown.html#and-this-line-is-a-heading"><i class="fa fa-check"></i><b>7.1</b> And this line is a heading</a></li>
<li class="chapter" data-level="7.2" data-path="rmarkdown.html"><a href="rmarkdown.html#first-a-heading"><i class="fa fa-check"></i><b>7.2</b> First a heading</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="second-text.html"><a href="second-text.html"><i class="fa fa-check"></i><b>8</b> Second, text</a></li>
<li class="chapter" data-level="9" data-path="third-code.html"><a href="third-code.html"><i class="fa fa-check"></i><b>9</b> Third, code</a><ul>
<li class="chapter" data-level="9.1" data-path="third-code.html"><a href="third-code.html#resources"><i class="fa fa-check"></i><b>9.1</b> Resources</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="git-and-github.html"><a href="git-and-github.html"><i class="fa fa-check"></i><b>10</b> Git and Github</a><ul>
<li class="chapter" data-level="10.1" data-path="git-and-github.html"><a href="git-and-github.html#before-the-class"><i class="fa fa-check"></i><b>10.1</b> Before the class</a></li>
<li class="chapter" data-level="10.2" data-path="git-and-github.html"><a href="git-and-github.html#resources-1"><i class="fa fa-check"></i><b>10.2</b> Resources</a></li>
<li class="chapter" data-level="10.3" data-path="git-and-github.html"><a href="git-and-github.html#bonus-links"><i class="fa fa-check"></i><b>10.3</b> Bonus Links</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="publishing.html"><a href="publishing.html"><i class="fa fa-check"></i><b>11</b> Publishing</a><ul>
<li class="chapter" data-level="11.1" data-path="publishing.html"><a href="publishing.html#sharing-your-rmd-files-via-github-pages"><i class="fa fa-check"></i><b>11.1</b> Sharing your Rmd files via Github pages</a></li>
<li class="chapter" data-level="11.2" data-path="publishing.html"><a href="publishing.html#other-sharing-options"><i class="fa fa-check"></i><b>11.2</b> Other sharing options</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="advanced-topics.html"><a href="advanced-topics.html"><i class="fa fa-check"></i><b>12</b> Advanced Topics</a><ul>
<li class="chapter" data-level="12.1" data-path="advanced-topics.html"><a href="advanced-topics.html#better-graphs"><i class="fa fa-check"></i><b>12.1</b> Better graphs</a></li>
<li class="chapter" data-level="12.2" data-path="advanced-topics.html"><a href="advanced-topics.html#reproducibility"><i class="fa fa-check"></i><b>12.2</b> Reproducibility</a></li>
<li class="chapter" data-level="12.3" data-path="advanced-topics.html"><a href="advanced-topics.html#preview-of-other-advanced-topics"><i class="fa fa-check"></i><b>12.3</b> Preview of other advanced topics</a></li>
</ul></li>
<li class="appendix"><span><b>Appendices</b></span></li>
<li class="chapter" data-level="A" data-path="extra-reading.html"><a href="extra-reading.html"><i class="fa fa-check"></i><b>A</b> Extra Reading</a><ul>
<li class="chapter" data-level="A.1" data-path="extra-reading.html"><a href="extra-reading.html#visualisation-theory"><i class="fa fa-check"></i><b>A.1</b> Visualisation (theory)</a></li>
<li class="chapter" data-level="A.2" data-path="extra-reading.html"><a href="extra-reading.html#the-reproducibility-crisis"><i class="fa fa-check"></i><b>A.2</b> The Reproducibility Crisis</a></li>
<li class="chapter" data-level="A.3" data-path="extra-reading.html"><a href="extra-reading.html#better-practice"><i class="fa fa-check"></i><b>A.3</b> Better practice</a></li>
<li class="chapter" data-level="A.4" data-path="extra-reading.html"><a href="extra-reading.html#project-organisation-1"><i class="fa fa-check"></i><b>A.4</b> Project organisation</a></li>
<li class="chapter" data-level="A.5" data-path="extra-reading.html"><a href="extra-reading.html#coding"><i class="fa fa-check"></i><b>A.5</b> Coding</a></li>
<li class="chapter" data-level="A.6" data-path="extra-reading.html"><a href="extra-reading.html#r"><i class="fa fa-check"></i><b>A.6</b> R</a></li>
<li class="chapter" data-level="A.7" data-path="extra-reading.html"><a href="extra-reading.html#making-graphs-practice"><i class="fa fa-check"></i><b>A.7</b> Making graphs (practice)</a></li>
</ul></li>
<li class="chapter" data-level="B" data-path="notes.html"><a href="notes.html"><i class="fa fa-check"></i><b>B</b> Notes</a><ul>
<li class="chapter" data-level="B.1" data-path="notes.html"><a href="notes.html#credit"><i class="fa fa-check"></i><b>B.1</b> Credit</a></li>
<li class="chapter" data-level="B.2" data-path="notes.html"><a href="notes.html#colophon"><i class="fa fa-check"></i><b>B.2</b> Colophon</a></li>
<li class="chapter" data-level="B.3" data-path="notes.html"><a href="notes.html#python"><i class="fa fa-check"></i><b>B.3</b> Python</a></li>
<li class="chapter" data-level="B.4" data-path="notes.html"><a href="notes.html#general-righteousness"><i class="fa fa-check"></i><b>B.4</b> General righteousness</a></li>
<li class="chapter" data-level="B.5" data-path="notes.html"><a href="notes.html#testimonials"><i class="fa fa-check"></i><b>B.5</b> Testimonials</a></li>
</ul></li>
<li class="divider"></li>
<li><a rel="license" href="https://creativecommons.org/licenses/by-sa/4.0/" 
    target="blank"><img alt="Creative Commons License" 
    style="border-width:0" 
    src="https://i.creativecommons.org/l/by-sa/4.0/88x31.png" /></a></li>
<li><a href="tomstafford.staff.shef.ac.uk/" target="blank">Tom Stafford</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">PSY6422 Data Management and Visualisation @ The University of Sheffield</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="rmarkdown" class="section level1">
<h1><span class="header-section-number">Chapter 7</span> Rmarkdown</h1>
<div class="info">
<p>
<em>Note this is a placeholder page. This material hasn't been taught yet. I am adding notes online as I can, so these pages in particular may evolve quickly</em>
</p>
</div>
<p>You need to be able to share you analysis. Comments are good for making code readable, but often you will want longer sections of text, mixed in with both the code you a running and the outputs of the code (e.g. the plots you are making with it). Do this with Rmarkdown.</p>
<p>A Rmarkdown file is a plain text file, like a R script, but with the extension <code>.Rmd'' rather than</code>.R''. You can make one now in RStudio by clicking File &gt; New File &gt; R Markdown. Or by saving an existing .R script as <code>filename.Rmd</code>.</p>
<p>RMarkdown is the system which marks how text should look after it has been converted into a webpage or PDF or other document. The name RMarkdown is kind of a joke, since RMarkdown is a verion of a &quot;markup langauge&quot;. Markups are the opposite of the <a href="https://en.wikipedia.org/wiki/WYSIWYG">WYSIWYG</a> systems (like MS word or Google Docs) which you are used to.</p>
<p>These pages are written in Rmarkdown. You can see this individual file <a href="https://github.com/tomstafford/psy6422/blob/master/008-rmarkdown.Rmd">here in the online repositry</a>. It will really help if you read the webpage alongside the file, so you can compare the file which generates the text, using the markdown, and the output (the webpage).</p>
<p>Rstudio magic (called &quot;rendering&quot; or &quot;knitting&quot;) turns this file in to the webpage.</p>
<p>Compare the <a href="https://github.com/tomstafford/psy6422/blob/master/008-rmarkdown.Rmd">file</a> and the <a href="https://tomstafford.github.io/psy6422/rmarkdown.html">webpage</a>.</p>
<p><strong>In the webpage this line is in bold. Why?</strong></p>
<p><em>In the webpage this line is in italic. Why?</em></p>
<div id="and-this-line-is-a-heading" class="section level2">
<h2><span class="header-section-number">7.1</span> And this line is a heading</h2>
<p>Try now creating your own Rmarkdown file by clicking File &gt; New File &gt; Rmarkdown in RStudio.</p>
<p>RMarkdown files have three components.</p>
</div>
<div id="first-a-heading" class="section level2">
<h2><span class="header-section-number">7.2</span> First a heading</h2>
<p>That looks like this, at the top of the file</p>
<div class="figure">
<img src="images/yaml.png" alt="Yaml matter at the top of a .Rmd file" />
<p class="caption">Yaml matter at the top of a .Rmd file</p>
</div>
<p>This is called YAML and it is stuff meant to be read by the computer when the file is converted into a document to be read by humans. You can see that this is meant to be an &quot;HTML&quot; document (that's the kind on a webpage), so let's make it now. Click &quot;knit&quot; in RStudio (or &quot;knit to HTML&quot; if you are exploring the options menu).</p>
<p>After a brief pause you should get a new window open, containing something that some of the same words as your document. Notice how the YAML stuff has disappeared, and the document now contains formatting (bold, italics, headings).</p>
</div>
</div>
<div class="psyteachr_footer">
  
</div>
<script>

/* update total correct if #total_correct exists */
update_total_correct = function() {
  if (t = document.getElementById("total_correct")) {
    t.innerHTML =
      document.getElementsByClassName("correct").length + " of " +
      document.getElementsByClassName("solveme").length + " correct";
  }
}

/* solution button toggling function */
b_func = function() {
  var cl = this.parentElement.classList;
  if (cl.contains('open')) {
    cl.remove("open");
  } else {
    cl.add("open");
  }
}

/* function for checking solveme answers */
solveme_func = function(e) {
  var real_answers = JSON.parse(this.dataset.answer);
  var my_answer = this.value;
  var cl = this.classList;
  if (cl.contains("ignorecase")) {
    my_answer = my_answer.toLowerCase();
  }
  if (cl.contains("nospaces")) {
    my_answer = my_answer.replace(/ /g, "");
  }
  
  if (my_answer !== "" & real_answers.includes(my_answer)) {
    cl.add("correct");
  } else {
    cl.remove("correct");
  }

  // match numeric answers within a specified tolerance
  if(this.dataset.tol){
    var tol = JSON.parse(this.dataset.tol);  
    var matches = real_answers.map(x => Math.abs(x - my_answer) < tol)
    if (matches.reduce((a, b) => a + b, 0) > 0) {
      cl.add("correct");
    } else {
      cl.remove("correct");
    }  
  }

  // added regex bit
  if (cl.contains("regex")){
    answer_regex = RegExp(real_answers.join("|"))
    if (answer_regex.test(my_answer)) {
      cl.add("correct");
    }  
  }
  
  update_total_correct();
}

window.onload = function() {
  /* set up solution buttons */
  var buttons = document.getElementsByTagName("button");

  for (var i = 0; i < buttons.length; i++) {
    if (buttons[i].parentElement.classList.contains('solution')) {
      buttons[i].onclick = b_func;
    }
  }
  
  /* set up solveme inputs */
  var solveme = document.getElementsByClassName("solveme");

  for (var i = 0; i < solveme.length; i++) {
    /* make sure input boxes don't auto-anything */
    solveme[i].setAttribute("autocomplete","off");
    solveme[i].setAttribute("autocorrect", "off");
    solveme[i].setAttribute("autocapitalize", "off"); 
    solveme[i].setAttribute("spellcheck", "false");
    solveme[i].value = "";
    
    /* adjust answer for ignorecase or nospaces */
    var cl = solveme[i].classList;
    var real_answer = solveme[i].dataset.answer;
    if (cl.contains("ignorecase")) {
      real_answer = real_answer.toLowerCase();
    }
    if (cl.contains("nospaces")) {
      real_answer = real_answer.replace(/ /g, "");
    }
    solveme[i].dataset.answer = real_answer;
    
    /* attach checking function */
    solveme[i].onkeyup = solveme_func;
    solveme[i].onchange = solveme_func;
  }
  
  update_total_correct();
}

</script>
            </section>

          </div>
        </div>
      </div>
<a href="coding-principles.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="second-text.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": true,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"],
"google": false
},
"fontsettings": {
"theme": "black",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": {},
"toc": {
"collapse": "section",
"scroll_highlight": true
}
});
});
</script>

</body>

</html>
